define([],function(){function e(){p.render(a,E)}function o(){window.requestAnimationFrame(o),e()}console.log("h5页面模型预览"),console.log("PC端模型预览改版!!!");var t=$(".canvas-model-preview").width(),n=t/1.5,a=new THREE.Scene,d=(new THREE.Clock,new THREE.AxisHelper(100));a.add(d),THREE.Loader.Handlers.add(/\.dds$/i,new THREE.DDSLoader);var i=new THREE.MTLLoader;i.setBaseUrl("http://7xs7nv.com1.z0.glb.clouddn.com/"),i.setPath("http://7xs7nv.com1.z0.glb.clouddn.com/"),i.crossOrigin="*",i.load(mtlUrl,function(e){e.preload();var o=new THREE.OBJLoader;o.setMaterials(e),o.setPath("http://7xs7nv.com1.z0.glb.clouddn.com/"),o.load(objUrl,function(e){model=e,model.scale.set(model_option[0],model_option[0],model_option[0]),model.rotation.x=model_option[1]/180*Math.PI,model.rotation.y=model_option[2]/180*Math.PI,model.rotation.z=model_option[3]/180*Math.PI,a.add(model),$(".canvas-model-preview .preview-img").remove(),$(".canvas-model-preview .progress").remove()},w,h)});var r=new THREE.PointLight(16777215);r.position.set(-100,200,-100),a.add(r);var l=new THREE.DirectionalLight(16772829);l.position.set(0,0,1).normalize(),a.add(l);var s=new THREE.SpotLight(16777215);s.position.set(-353,-353,500),s.castShadow=!0,a.add(s);var c=new THREE.SpotLight(16777215);c.position.set(-130,483,300),c.castShadow=!0,a.add(c);var m=new THREE.SpotLight(16777215);m.position.set(483,-130,300),m.castShadow=!0,a.add(m),a.add(new THREE.AmbientLight(1052720));var E=new THREE.PerspectiveCamera(45,t/n,.1,1e3);E.position.set(200,200,200),E.lookAt(a.position);var p=new THREE.WebGLRenderer({antialiasing:!0});p.setSize(t,n),$(".canvas-model-preview").append(p.domElement);var v=new THREE.OrbitControls(E,document.querySelector(".canvas-model-preview"));v.addEventListener("change",e),o();var w=function(e){if(e.lengthComputable){var o=e.loaded/e.total*100;$(".progress-bar").css("width",Math.round(o,2)+"%"),console.log(Math.round(o,2)+"% downloaded")}},h=function(e){}});