"use strict";define([],function(){function t(t,o,a,e,i,n){function r(t){return t/180*Math.PI}function l(){h(),t.position.set(u.left_x,u.left_y,u.left_z),a.position.set(u.right_x,u.right_y,u.right_z),t.lookAt(o.position),a.lookAt(e.position),i(),window.requestAnimationFrame(l)}function h(){u.gamma<0?u.left_y=u.radius*Math.cos(r(u.gamma)):u.left_y=-1*u.radius*Math.cos(r(u.gamma)),u.right_y=u.left_y;var t=(u.radius-Math.abs(u.left_y))/u.radius;u.left_x=u.radius*Math.cos(r(u.alpha))*t,u.left_z=-1*u.radius*Math.sin(r(u.alpha))*t,u.left_x=Math.round(u.left_x,2),u.left_y=Math.round(u.left_y,2),u.left_z=Math.round(u.left_z,2);var o=(u.alpha+15)%360;u.right_x=u.radius*Math.cos(r(o))*t,u.right_z=-1*u.radius*Math.sin(r(o))*t,u.right_x=Math.round(u.right_x,2),u.right_y=Math.round(u.right_y,2),u.right_z=Math.round(u.right_z,2)}window.DeviceOrientationEvent?window.addEventListener("deviceorientation",function(t){u.beta=Math.round(t.beta,2),u.gamma=Math.round(t.gamma,2),u.gamma<0?u.alpha=(Math.round(t.alpha,2)+180)%360:u.alpha=Math.round(t.alpha,2)},!1):alert("您的设备不支持");var u={radius:n,alpha:0,beta:0,gamma:90,left_x:0,left_y:200,left_z:0,right_x:0,right_y:200,right_z:0,zoom:1};l();var d,m,s=!0;document.body.addEventListener("touchstart",function(){function o(){console.log("alpha:"+u.alpha+";beta:"+u.beta+";gamma"+u.gamma),console.log("("+u.left_x+","+u.left_y+","+u.left_z+")"),u.zoom*=.98,t.zoom=u.zoom,t.updateProjectionMatrix(),a.zoom=u.zoom,a.updateProjectionMatrix(),m=setTimeout(o,500)}d=setTimeout(function(){s=!1,o()},300)}),document.body.addEventListener("touchend",function(){clearTimeout(d),clearTimeout(m),s?(u.zoom*=1.01,t.zoom=u.zoom,t.updateProjectionMatrix(),a.zoom=u.zoom,a.updateProjectionMatrix(),console.log("放大")):console.log("缩小结束"),console.log("zoom:"+u.zoom),s=!0})}return t});