"use strict";define(["fullscreen","VRControls"],function(o,e){function t(){g.render(d,E),v.render(d,w)}console.log("vr页面");var n=2*window.innerWidth,i=2*screen.availHeight,a=n/i;window.onorientationchange=function(){switch(console.log(window.orientation),window.orientation){case 90:$(".orientation").hide(),o.full(document.getElementsByClassName("model_show")[0]),$(".model_show").height(n/2);break;case-90:case 0:case 180:$(".orientation").show()}};var d=new THREE.Scene,l="";THREE.Loader.Handlers.add(/\.dds$/i,new THREE.DDSLoader);var s=new THREE.MTLLoader;s.setBaseUrl("http://7xs7nv.com1.z0.glb.clouddn.com/"),s.setPath("http://7xs7nv.com1.z0.glb.clouddn.com/"),s.crossOrigin="*",s.setMaterialOptions({side:THREE.DoubleSide}),s.load(mtlUrl,function(o){o.preload();var e=new THREE.OBJLoader;e.setMaterials(o),e.setPath("http://7xs7nv.com1.z0.glb.clouddn.com/"),e.load(objUrl,function(o){l=o,l.scale.set(.6*model_option[0],.6*model_option[0],.6*model_option[0]),l.rotation.x=model_option[1]/180*Math.PI,l.rotation.y=model_option[2]/180*Math.PI,l.rotation.z=model_option[3]/180*Math.PI,l.position.set(.6*model_option[4]||0,.6*model_option[5]||0,.6*model_option[6]||0),d.add(l),$(".orientation").html("请旋转手机，并放入cardboard"),$(".model_show_left").append(g.domElement),$(".model_show_right").append(v.domElement)},u,R)});var r=new THREE.PointLight(16777215);r.position.set(-100,200,-100),d.add(r);var c=new THREE.DirectionalLight(16772829);c.position.set(0,0,1).normalize(),d.add(c);var h=new THREE.SpotLight(16777215);h.position.set(-353,-353,500),h.castShadow=!0,d.add(h);var m=new THREE.SpotLight(16777215);m.position.set(-130,483,300),m.castShadow=!0,d.add(m);var p=new THREE.SpotLight(16777215);p.position.set(483,-130,300),p.castShadow=!0,d.add(p),d.add(new THREE.AmbientLight(1052720));var E=new THREE.PerspectiveCamera(45,1/(2*a),.1,1e3);E.position.set(200,200,200),E.lookAt(d.position);var w=E.clone(),g=new THREE.WebGLRenderer({antialiasing:!0,alpha:!0});g.setSize(i/2,n);var v=new THREE.WebGLRenderer({antialiasing:!0,alpha:!0});v.setSize(i/2,n),e(E,d,w,d,t,200);var u=function(o){if(o.lengthComputable){var e=o.loaded/o.total*100;$(".orientation").html("模型加载"+Math.round(e,2)+"%"),console.log(Math.round(e,2)+"% downloaded")}},R=function(o){}});