define([],function(){function e(){i=new Stats,i.domElement.style.position="absolute",i.domElement.style.top="auto",document.body.appendChild(i.domElement)}function o(){i.begin(),v.render(d,p),i.end()}function n(){window.requestAnimationFrame(n),o()}console.log("PC端模型预览改版!!!");var t=$(".col-md-9").width(),a=t/1.5,d=new THREE.Scene,i=(new THREE.Clock,null),r="";e();var l=new THREE.AxisHelper(100);d.add(l),THREE.Loader.Handlers.add(/\.dds$/i,new THREE.DDSLoader);var s=new THREE.MTLLoader;s.setBaseUrl("http://7xs7nv.com1.z0.glb.clouddn.com/"),s.setPath("http://7xs7nv.com1.z0.glb.clouddn.com/"),s.crossOrigin="*",s.load(mtlUrl,function(e){e.preload();var o=new THREE.OBJLoader;o.setMaterials(e),o.setPath("http://7xs7nv.com1.z0.glb.clouddn.com/"),o.load(objUrl,function(e){r=e,r.scale.set(model_option[0],model_option[0],model_option[0]),r.rotation.x=model_option[1]/180*Math.PI,r.rotation.y=model_option[2]/180*Math.PI,r.rotation.z=model_option[3]/180*Math.PI,d.add(r),$(".canvas-model-preview .preview-img").remove(),$(".canvas-model-preview .progress").remove()},h,u)});var m=new THREE.PointLight(16777215);m.position.set(-100,200,-100),d.add(m);var c=new THREE.DirectionalLight(16772829);c.position.set(0,0,1).normalize(),d.add(c);var E=new THREE.SpotLight(16777215);E.position.z=70,E.castShadow=!0,d.add(E),d.add(new THREE.AmbientLight(1052720));var p=new THREE.PerspectiveCamera(45,t/a,.1,1e3);p.position.set(200,200,200),p.lookAt(d.position);var v=new THREE.WebGLRenderer({antialiasing:!0});v.setSize(t,a),$(".canvas-model-preview").append(v.domElement);var w=new THREE.OrbitControls(p);w.addEventListener("change",o),n();var h=function(e){if(e.lengthComputable){var o=e.loaded/e.total*100;$(".progress-bar").css("witdh",Math.round(o,2)+"%"),console.log(Math.round(o,2)+"% downloaded")}},u=function(e){};$()});