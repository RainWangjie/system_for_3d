define([],function(){function e(){var e=document.getElementById("banner");s=new THREE.PerspectiveCamera(30,2.5,1,5e3),s.position.set(0,0,900),l=new THREE.Scene,l.fog=new THREE.Fog(16777215,1,5e3),l.fog.color.setHSL(.6,0,1),h=new THREE.TrackballControls(s),h.rotateSpeed=1,h.zoomSpeed=1.2,h.panSpeed=.8,h.noZoom=!1,h.noPan=!1,h.staticMoving=!0,h.dynamicDampingFactor=.15;var a=new THREE.AxisHelper(100);l.add(a),c=new THREE.HemisphereLight(16777215,16777215,.6),c.color.setHSL(.6,1,.6),c.groundColor.setHSL(.095,1,.75),c.position.set(-100,700,0),l.add(c),E=new THREE.DirectionalLight(16777215,1),E.color.setHSL(.1,1,.95),E.position.set(-1,1.75,1),E.position.multiplyScalar(50),E.castShadow=!0,E.shadowMapWidth=2048,E.shadowMapHeight=2048;var n=50;E.shadowCameraLeft=-n,E.shadowCameraRight=n,E.shadowCameraTop=n,E.shadowCameraBottom=-n,E.shadowCameraFar=3500,E.shadowBias=-1e-4,l.add(E);var r=new THREE.PlaneBufferGeometry(1e4,1e4),i=new THREE.MeshPhongMaterial({color:16777215,specular:328965});i.color.setHSL(.095,1,.75);var p=new THREE.Mesh(r,i);p.rotation.x=-Math.PI/2,p.position.y=-33,l.add(p),p.receiveShadow=!0;var v=document.getElementById("vertexShader").textContent,w=document.getElementById("fragmentShader").textContent,H={topColor:{type:"c",value:new THREE.Color(30719)},bottomColor:{type:"c",value:new THREE.Color(16777215)},offset:{type:"f",value:33},exponent:{type:"f",value:.6}};H.topColor.value.copy(c.color),l.fog.color.copy(H.bottomColor.value);var u=new THREE.SphereGeometry(4e3,32,15),T=new THREE.ShaderMaterial({vertexShader:v,fragmentShader:w,uniforms:H,side:THREE.BackSide}),g=new THREE.Mesh(u,T);l.add(g);var R=new THREE.JSONLoader;R.load("http://7xs7nv.com1.z0.glb.clouddn.com/horse.js",function(e){var o=new THREE.MeshPhongMaterial({color:16777215,specular:16777215,shininess:20,morphTargets:!0,vertexColors:THREE.FaceColors,shading:THREE.FlatShading}),a=new THREE.Mesh(e,o),t=.35;a.scale.set(t,t,t),a.position.set(30,-36,0),a.rotation.y=-1,a.castShadow=!0,a.receiveShadow=!0,l.add(a);var n=new THREE.AnimationMixer(a);n.clipAction(e.animations[0]).setDuration(1).play(),m.push(n)});var f=new THREE.JSONLoader;f.load("http://7xs7nv.com1.z0.glb.clouddn.com/parrot.js",function(e){var o=new THREE.MeshPhongMaterial({color:16777215,specular:16777215,shininess:20,morphTargets:!0,vertexColors:THREE.FaceColors,shading:THREE.FlatShading}),a=new THREE.Mesh(e,o),t=.35;a.scale.set(t,t,t),a.position.set(-40,30,0),a.rotation.y=-.9,a.castShadow=!0,a.receiveShadow=!0,l.add(a);var n=new THREE.AnimationMixer(a);n.clipAction(e.animations[0]).setDuration(1).play(),m.push(n)}),t(),d=new THREE.WebGLRenderer({antialias:!0}),d.setClearColor(l.fog.color),d.setPixelRatio(window.devicePixelRatio),d.setSize($("#banner").width(),.4*$("#banner").width()),e.appendChild(d.domElement),d.gammaInput=!0,d.gammaOutput=!0,d.shadowMap.enabled=!0,d.shadowMap.cullFace=THREE.CullFaceBack,o()}function o(){requestAnimationFrame(o),a()}function a(){var e=p.getDelta();h.update();for(var o=0;o<m.length;o++)m[o].update(e);d.render(l,s)}function t(){u=new THREE.MultiMaterial([new THREE.MeshPhongMaterial({color:16777215,shading:THREE.FlatShading}),new THREE.MeshPhongMaterial({color:16777215,shading:THREE.SmoothShading})]),v=new THREE.Group,v.position.y=100,l.add(v),r()}function n(){if(H=new THREE.TextGeometry(T,{font:y,size:R,height:g,curveSegments:f,bevelThickness:S,bevelSize:M,bevelEnabled:x,material:0,extrudeMaterial:1}),H.computeBoundingBox(),H.computeVertexNormals(),x)for(var e=.1*(g*R),o=0;o<H.faces.length;o++){var a=H.faces[o];if(1==a.materialIndex){for(var t=0;t<a.vertexNormals.length;t++)a.vertexNormals[t].z=0,a.vertexNormals[t].normalize();var n=H.vertices[a.a],r=H.vertices[a.b],i=H.vertices[a.c],s=THREE.GeometryUtils.triangleArea(n,r,i);if(s>e)for(var t=0;t<a.vertexNormals.length;t++)a.vertexNormals[t].copy(a.normal)}}w=new THREE.Mesh(H,u),w.position.set(-550,-130,-60),w.rotation.x=0,w.rotation.y=2*Math.PI,v.add(w)}function r(){var e=new THREE.FontLoader;e.load("/font/optimer_bold.typeface.js",function(e){y=e,i()})}function i(){v.remove(w),T&&n()}var s,l,d,E,c,h,m=[],p=new THREE.Clock;e();var v,w,H,u,T="Welcome to 3D model system",g=20,R=60,f=4,S=2,M=1.5,x=!0,y=""});