define([],function(){function e(){var e=document.getElementById("banner");s=new THREE.PerspectiveCamera(30,2.5,1,5e3),s.position.set(0,0,900),l=new THREE.Scene,l.fog=new THREE.Fog(16777215,1,5e3),l.fog.color.setHSL(.6,0,1),h=new THREE.TrackballControls(s),h.rotateSpeed=1,h.zoomSpeed=1.2,h.panSpeed=.8,h.noZoom=!1,h.noPan=!1,h.staticMoving=!0,h.dynamicDampingFactor=.15,c=new THREE.HemisphereLight(16777215,16777215,.6),c.color.setHSL(.6,1,.6),c.groundColor.setHSL(.095,1,.75),c.position.set(-100,700,0),l.add(c),E=new THREE.DirectionalLight(16777215,1),E.color.setHSL(.1,1,.95),E.position.set(-1,1.75,1),E.position.multiplyScalar(50),E.castShadow=!0,E.shadowMapWidth=2048,E.shadowMapHeight=2048;var a=50;E.shadowCameraLeft=-a,E.shadowCameraRight=a,E.shadowCameraTop=a,E.shadowCameraBottom=-a,E.shadowCameraFar=3500,E.shadowBias=-1e-4,l.add(E);var n=new THREE.PlaneBufferGeometry(1e4,1e4),r=new THREE.MeshPhongMaterial({color:16777215,specular:328965});r.color.setHSL(.095,1,.75);var i=new THREE.Mesh(n,r);i.rotation.x=-Math.PI/2,i.position.y=-33,l.add(i),i.receiveShadow=!0;var w=document.getElementById("vertexShader").textContent,u=document.getElementById("fragmentShader").textContent,H={topColor:{type:"c",value:new THREE.Color(30719)},bottomColor:{type:"c",value:new THREE.Color(16777215)},offset:{type:"f",value:33},exponent:{type:"f",value:.6}};H.topColor.value.copy(c.color),l.fog.color.copy(H.bottomColor.value);var g=new THREE.SphereGeometry(4e3,32,15),T=new THREE.ShaderMaterial({vertexShader:w,fragmentShader:u,uniforms:H,side:THREE.BackSide}),R=new THREE.Mesh(g,T);l.add(R);var f=new THREE.JSONLoader;f.load("http://7xs7nv.com1.z0.glb.clouddn.com/horse.js",function(e){var o=new THREE.MeshPhongMaterial({color:16777215,specular:16777215,shininess:20,morphTargets:!0,vertexColors:THREE.FaceColors,shading:THREE.FlatShading});m=new THREE.Mesh(e,o);var a=.35;m.scale.set(a,a,a),m.position.set(30,-36,0),m.rotation.y=-1,m.castShadow=!0,m.receiveShadow=!0,l.add(m);var t=new THREE.AnimationMixer(m);t.clipAction(e.animations[0]).setDuration(1).play(),v.push(t)});var S=new THREE.JSONLoader;S.load("http://7xs7nv.com1.z0.glb.clouddn.com/parrot.js",function(e){var o=new THREE.MeshPhongMaterial({color:16777215,specular:16777215,shininess:20,morphTargets:!0,vertexColors:THREE.FaceColors,shading:THREE.FlatShading});p=new THREE.Mesh(e,o);var a=.35;p.scale.set(a,a,a),p.position.set(-40,30,0),p.rotation.y=-.9,p.castShadow=!0,p.receiveShadow=!0,l.add(p);var t=new THREE.AnimationMixer(p);t.clipAction(e.animations[0]).setDuration(1).play(),v.push(t),console.log(t._root.position)}),t(),d=new THREE.WebGLRenderer({antialias:!0}),d.setClearColor(l.fog.color),d.setPixelRatio(window.devicePixelRatio),d.setSize($("#banner").width(),.4*$("#banner").width()),e.appendChild(d.domElement),d.gammaInput=!0,d.gammaOutput=!0,d.shadowMap.enabled=!0,d.shadowMap.cullFace=THREE.CullFaceBack,o()}function o(){requestAnimationFrame(o),a()}function a(){var e=w.getDelta();h.update();for(var o=0;o<v.length;o++)v[o].update(e);d.render(l,s)}function t(){T=new THREE.MultiMaterial([new THREE.MeshPhongMaterial({color:16777215,shading:THREE.FlatShading}),new THREE.MeshPhongMaterial({color:16777215,shading:THREE.SmoothShading})]),u=new THREE.Group,u.position.y=100,l.add(u),r()}function n(){if(g=new THREE.TextGeometry(R,{font:b,size:S,height:f,curveSegments:M,bevelThickness:x,bevelSize:C,bevelEnabled:y,material:0,extrudeMaterial:1}),g.computeBoundingBox(),g.computeVertexNormals(),y)for(var e=.1*(f*S),o=0;o<g.faces.length;o++){var a=g.faces[o];if(1==a.materialIndex){for(var t=0;t<a.vertexNormals.length;t++)a.vertexNormals[t].z=0,a.vertexNormals[t].normalize();var n=g.vertices[a.a],r=g.vertices[a.b],i=g.vertices[a.c],s=THREE.GeometryUtils.triangleArea(n,r,i);if(s>e)for(var t=0;t<a.vertexNormals.length;t++)a.vertexNormals[t].copy(a.normal)}}H=new THREE.Mesh(g,T),H.position.set(-550,-130,-60),H.rotation.x=0,H.rotation.y=2*Math.PI,u.add(H)}function r(){var e=new THREE.FontLoader;e.load("/font/optimer_bold.typeface.js",function(e){b=e,i()})}function i(){u.remove(H),R&&n()}var s,l,d,E,c,h,m,p,v=[],w=new THREE.Clock;e();var u,H,g,T,R="Welcome to 3D model world",f=20,S=60,M=4,x=2,C=1.5,y=!0,b=""});